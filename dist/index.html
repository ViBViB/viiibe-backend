<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Viiibe ‚Äì Connect</title>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lato:wght@400;700&family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500;700&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
  <script type="module" crossorigin>(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const e of i)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function o(i){const e={};return i.integrity&&(e.integrity=i.integrity),i.referrerPolicy&&(e.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?e.credentials="include":i.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(i){if(i.ep)return;i.ep=!0;const e=o(i);fetch(i.href,e)}})();const X={auth:document.getElementById("view-auth"),authorization:document.getElementById("view-authorization"),search:document.getElementById("view-search"),loading:document.getElementById("view-loading"),generating:document.getElementById("view-generating"),moodboard:document.getElementById("view-moodboard"),details:document.getElementById("view-details")},J=document.getElementById("view-wrapper"),x={moodboard:document.getElementById("tab-moodboard"),colors:document.getElementById("tab-colors"),typography:document.getElementById("tab-typography"),layout:document.getElementById("tab-layout")},b={moodboard:document.getElementById("moodboardGrid"),colors:document.getElementById("section-colors"),typography:document.getElementById("section-typography"),layout:document.getElementById("section-layout")};function k(t){const n=["auth","authorization","search","loading","generating"].includes(t);J?.classList.toggle("centered",n),Object.values(X).forEach(o=>o?.classList.remove("active")),X[t]?.classList.add("active")}function E(t,n,o){o/=100;const l=n*Math.min(o,1-o)/100,i=e=>{const a=(e+t/30)%12,r=o-l*Math.max(Math.min(a-3,9-a,1),-1);return Math.round(255*r).toString(16).padStart(2,"0")};return`#${i(0)}${i(8)}${i(4)}`.toUpperCase()}function Q(t,n,o){t/=255,n/=255,o/=255;const l=Math.max(t,n,o),i=Math.min(t,n,o);let e=0,a,r=(l+i)/2;if(l===i)e=a=0;else{const h=l-i;switch(a=r>.5?h/(2-l-i):h/(l+i),l){case t:e=(n-o)/h+(n<o?6:0);break;case n:e=(o-t)/h+2;break;case o:e=(t-n)/h+4;break}e/=6}return[e*360,a*100,r*100]}function Y(t){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:{r:0,g:0,b:0}}async function _(t){const n=Math.min(t.length,6),o=[];for(let d=0;d<n;d++){const g=t[d];if(g.src){const v=await V(g);o.push(...v)}}if(o.length===0)return[];const l=[];o.forEach(d=>{let g=l.find(v=>Math.abs(v.h-d.h)<15);g?(g.pixels.push(d),g.weight+=d.s>30?3:1):l.push({h:d.h,pixels:[d],weight:1})}),l.sort((d,g)=>g.weight-d.weight);let i=l.find(d=>d.pixels.some(g=>g.s>20))||l[0],e=i?i.pixels.reduce((d,g)=>g.s-Math.abs(g.l-50)*.5>d.s-Math.abs(d.l-50)*.5?g:d):{h:200,s:0,l:50};const a=E(e.h,e.s,e.l);let r=l.find(d=>Math.abs(d.h-e.h)>40&&d.pixels.some(g=>g.s>30)),h,m;if(r){const d=r.pixels.reduce((g,v)=>v.s>g.s?v:g);h=E(d.h,d.s,d.l),m=`Accent-Context-${Math.round(d.h)}`}else h=E((e.h+180)%360,85,60),m="Accent-Pop";const c=E((e.h+25)%360,Math.max(10,e.s-20),Math.min(90,e.l+15));return[{role:"Primary",hex:a,primitive:`Brand-${Math.round(e.h)}`},{role:"Secondary",hex:c,primitive:"Brand-Alt"},{role:"Accent",hex:h,primitive:m},{role:"Background",hex:"#FFFFFF",primitive:"Base-White"},{role:"Foreground",hex:"#111111",primitive:"Base-Black"},{role:"Neutral",hex:E(e.h,5,50),primitive:"Neutral-500"},{role:"Border",hex:E(e.h,5,90),primitive:"Neutral-200"},{role:"Success",hex:E(140,70,45),primitive:"Green"},{role:"Warning",hex:E(35,90,55),primitive:"Amber"},{role:"Error",hex:E(0,80,55),primitive:"Red"}]}async function Z(){const t=document.getElementById("paletteGrid"),n=document.getElementById("sourceImagesGrid"),o=document.querySelectorAll(".pin-image");if(!t)return;if(o.length===0){t.innerHTML='<p style="grid-column:1/-1; text-align:center; color:#999;">Add images first.</p>',n&&(n.innerHTML="");return}t.innerHTML='<p style="grid-column:1/-1; text-align:center; color:#999;">Analyzing vibes...</p>',n&&(n.innerHTML="");const l=Math.min(o.length,6);if(n)for(let e=0;e<l;e++){const a=o[e];if(a.src){const r=document.createElement("img");r.src=a.src,r.className="source-thumb",n.appendChild(r)}}const i=await _(o);ee(i)}function V(t){return new Promise(n=>{if(!t.src){console.log("üé® Image has no src"),n([]);return}const o=document.createElement("canvas"),l=o.getContext("2d");if(!l)return console.log("üé® Could not get canvas context"),n([]);o.width=50,o.height=50;const i=new Image;i.crossOrigin="Anonymous",i.onload=()=>{try{l.drawImage(i,0,0,50,50);const e=l.getImageData(0,0,50,50).data,a=[];for(let r=0;r<e.length;r+=16){const[h,m,c]=Q(e[r],e[r+1],e[r+2]);c>5&&c<98&&a.push({h,s:m,l:c})}n(a)}catch(e){console.error("üé® Canvas error:",e),n([])}},i.onerror=e=>{console.error("üé® Image load error:",e),n([])},i.src=t.src})}function ee(t){const n=document.getElementById("paletteGrid");n&&(n.innerHTML="",t.forEach(o=>{const l=document.createElement("div");l.className="role-card";const i=Y(o.hex),a=(i.r*299+i.g*587+i.b*114)/1e3>=128?"#000":"#fff";l.innerHTML=`<div class="role-preview" style="background-color:${o.hex}"><div class="contrast-dot" style="background-color:${a}"></div></div><div class="role-info"><span class="role-name">${o.role}</span><span class="role-hex">${o.hex}</span><span class="role-primitive">${o.primitive}</span></div>`,n.appendChild(l)}))}const te={red:{hMin:345,hMax:15},blue:{hMin:190,hMax:260},green:{hMin:70,hMax:160},lime:{hMin:60,hMax:100},yellow:{hMin:40,hMax:70},orange:{hMin:15,hMax:40},purple:{hMin:260,hMax:300},pink:{hMin:300,hMax:345},cyan:{hMin:160,hMax:190},black:{lMax:25},white:{lMin:80},gray:{sMax:15},dark:{lMax:30},light:{lMin:70},beige:{hMin:20,hMax:50,sMax:40,lMin:50},brown:{hMin:15,hMax:45,lMax:50},colorful:{sMin:35}};async function oe(t,n){const o=te[n.toLowerCase()];if(!o)return 0;const l=await V(t);if(l.length===0)return 0;let i=0,e=0;return l.forEach(a=>{let r=!0;const h=Math.max(.1,a.s/100*(1-Math.abs(a.l-50)/50));o.sMin!==void 0&&a.s<o.sMin&&(r=!1),o.sMax!==void 0&&a.s>o.sMax&&(r=!1),o.lMin!==void 0&&a.l<o.lMin&&(r=!1),o.lMax!==void 0&&a.l>o.lMax&&(r=!1),o.hMin!==void 0&&o.hMax!==void 0&&(a.s<10?r=!1:o.hMin>o.hMax?a.h>=o.hMin||a.h<=o.hMax||(r=!1):a.h>=o.hMin&&a.h<=o.hMax||(r=!1)),r&&(i+=h),e+=h}),e>0?i/e:0}function ne(){const t=document.getElementById("typographyContent"),o=(document.getElementById("searchInput")?.value||"").toLowerCase();if(!t||t.children.length>1&&!t.innerHTML.includes("Analyzing"))return;t.innerHTML="";const l={modern:{head:{family:"Inter",weight:"700"},body:{family:"Inter",weight:"400"}},elegant:{name:"Editorial Serif",head:{family:"Playfair Display",weight:"700"},body:{family:"Lato",weight:"400"}},tech:{name:"Tech Mono",head:{family:"Space Mono",weight:"700"},body:{family:"Roboto",weight:"400"}},corporate:{name:"Clean Corp",head:{family:"Roboto",weight:"700"},body:{family:"Roboto",weight:"400"}}},i={majorThird:{name:"Major Third",ratio:"1.250"},minorThird:{name:"Minor Third",ratio:"1.200"},perfectFourth:{name:"Perfect Fourth",ratio:"1.333"}};let e=l.modern,a=i.majorThird,r="Balanced contrast.";o.match(/fashion|wedding|luxury|art/)?(e=l.elegant,a=i.perfectFourth,r="High contrast."):o.match(/dashboard|data|crypto|future/)?(e=l.tech,a=i.minorThird,r="Tight hierarchy."):o.match(/bank|corporate|law|finance/)&&(e=l.corporate,a=i.majorThird,r="Standard ratio.");const h=[{role:"Display 3XL",size:"72px",lh:"120%",ls:"-0.02em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{role:"Display 2XL",size:"56px",lh:"120%",ls:"-0.02em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{role:"Heading XL",size:"48px",lh:"120%",ls:"-0.02em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{role:"Heading L",size:"36px",lh:"120%",ls:"-0.02em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{role:"Heading M",size:"30px",lh:"120%",ls:"-0.02em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{role:"Heading S",size:"24px",lh:"120%",ls:"-0.02em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{role:"Heading XS",size:"20px",lh:"150%",ls:"-0.015em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{role:"Heading 2XS",size:"18px",lh:"150%",ls:"-0.015em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{role:"Heading 3XS",size:"16px",lh:"150%",ls:"-0.015em",font:e.head,weight:e.head.weight,text:"The quick brown fox"},{isDivider:!0,label:"Body & Paragraphs",role:"",size:"",lh:"",ls:"",font:{family:""},weight:"",text:""},{role:"Body XL",size:"20px",lh:"150%",ls:"-0.015em",font:e.body,weight:e.body.weight,text:"Lorum ipsum dolor sit amet."},{role:"Body L",size:"18px",lh:"150%",ls:"-0.012em",font:e.body,weight:e.body.weight,text:"Lorum ipsum dolor sit amet."},{role:"Body M",size:"16px",lh:"150%",ls:"-0.01em",font:e.body,weight:e.body.weight,text:"Lorum ipsum dolor sit amet."},{role:"Body S",size:"14px",lh:"150%",ls:"-0.005em",font:e.body,weight:400,text:"Metadata info label"}];let m="";h.forEach(c=>{c.isDivider?m+=`<h4 style="font-size:10px; font-weight:600; text-transform:uppercase; color:#bbb; margin:32px 0 8px 0; letter-spacing:1px;">${c.label}</h4>`:m+=`<div class="scale-item"><div class="scale-meta"><span class="scale-role">${c.role}</span><span class="scale-specs">${c.size} / ${c.lh}</span></div><div class="scale-preview" style="font-family:'${c.font.family}'; font-weight:${c.weight}; font-size:${c.size}; line-height:${c.lh}; letter-spacing:${c.ls};">${c.text}</div></div>`}),t.innerHTML=`<div class="font-pair-card" style="margin-bottom:24px; display:grid; grid-template-columns:1fr 1fr 1.3fr; gap:16px; align-items:start; border-top:1px solid #E0E0E0; padding-top:16px;"><div class="font-preview-box"><span class="font-label">Heading</span><div class="font-name" style="font-family:'${e.head.family}'; font-size:13px; font-weight:600; color:#000;">${e.head.family}</div></div><div class="font-preview-box" style="border-left:1px solid #eee; padding-left:16px;"><span class="font-label">Body</span><div class="font-name" style="font-family:'${e.body.family}'; font-size:13px; font-weight:600; color:#000;">${e.body.family}</div></div><div class="font-preview-box" style="border-left:1px solid #eee; padding-left:16px;"><span class="font-label">Scale System</span><div style="font-size:13px; font-weight:600; color:#000;">${a.name} (${a.ratio})</div><div style="font-size:11px; color:#888; line-height:1.3; margin-top:2px;">${r}</div></div></div><div class="scale-list">${m}</div>`}function S(t){[x.moodboard,x.colors,x.typography,x.layout].forEach(n=>n?.classList.remove("active")),[b.moodboard,b.colors,b.typography,b.layout].forEach(n=>n&&(n.style.display="none")),t==="moodboard"?(x.moodboard?.classList.add("active"),b.moodboard&&(b.moodboard.style.display="block")):t==="colors"?(x.colors?.classList.add("active"),b.colors&&(b.colors.style.display="block"),Z()):t==="typography"?(x.typography?.classList.add("active"),b.typography&&(b.typography.style.display="block"),ne()):t==="layout"&&(x.layout?.classList.add("active"),b.layout&&(b.style.display="block"))}let q=0;const ae=500;let U=0,L=[],A=!1;function y(t){t<=q||(L.includes(t)||(L.push(t),L.sort((n,o)=>n-o)),K())}function K(){if(L.length===0||A)return;const t=L[0];if(t!==q+1)return;A=!0;const o=Date.now()-U,l=Math.max(0,ae-o);setTimeout(()=>{const e=document.querySelectorAll(".progress-item")[t-1];if(!e){A=!1;return}e.classList.add("active"),setTimeout(()=>{const a=e.querySelector(".checkbox");a&&(a.textContent="‚úì"),e.classList.remove("active"),e.classList.add("completed"),q=t,U=Date.now(),L.shift(),A=!1,t===7?setTimeout(()=>{k("moodboard"),S("moodboard")},2e3):K()},200)},l)}function ie(){q=0,U=Date.now(),L=[],A=!1,document.querySelectorAll(".progress-item").forEach(n=>{n.classList.remove("active","completed");const o=n.querySelector(".checkbox");o&&(o.textContent="‚òê")})}function H(t,n=!1){const o=(t||"").trim();if(!o)return;ie(),k("loading"),y(1);const l=document.getElementById("moodboardGrid");l&&(l.innerHTML="",l.style.display="block"),parent.postMessage({pluginMessage:{type:"smart-search",query:o,reload:n}},"*")}async function F(t){const n=document.getElementById("moodboardGrid");if(!n)return;const o=Array.from(n.querySelectorAll(".pin-image"));let l=0;const i=async()=>{const e=o.filter(a=>a.src&&a.src.length>0);if(e.length>o.length*.5||l>10){console.log(`üé® Starting visual analysis for ${t} on ${e.length} images`);const a=await Promise.all(o.map(async m=>{const c=m.closest(".pin-container");if(!m.src)return{container:c,score:-1,url:""};const d=await oe(m,t),g=m.getAttribute("data-pinterest-url")||"";return{container:c,score:d,url:g}}));a.sort((m,c)=>c.score-m.score);let r=0;const h=[];a.forEach(m=>{m.container&&(m.score>.15?(n.appendChild(m.container),h.push(m.url),r++):m.container.remove())}),window.postMessage({type:"update-lightbox-urls",urls:h},"*"),console.log("üé® Visual sort complete. Visible:",r),y(6),y(7)}else l++,setTimeout(i,500)};setTimeout(i,1e3)}const re="https://moood-refactor.vercel.app/api",le={imageProxy:`${re}/image-proxy`};function j(t){return`${le.imageProxy}?url=${encodeURIComponent(t)}`}function se(){const t=document.getElementById("styleGuideDrawer"),n=document.getElementById("drawerBackdrop");t&&n&&(n.classList.add("active"),t.classList.add("active"))}function N(){const t=document.getElementById("styleGuideDrawer"),n=document.getElementById("drawerBackdrop");t&&n&&(n.classList.remove("active"),t.classList.remove("active"))}function ce(){return{downloadMoodboard:document.getElementById("toggle-moodboard")?.checked||!1,downloadColorPalette:document.getElementById("toggle-palette")?.checked||!1,downloadTypeScale:document.getElementById("toggle-typography")?.checked||!1,createFigmaStyles:document.getElementById("toggle-styles")?.checked||!1,createFigmaVariables:document.getElementById("toggle-variables")?.checked||!1,createBasicComponents:!1}}async function de(){const t=document.querySelectorAll(".pin-image");console.log("üé® [collectAllData] Found image elements:",t.length);const n=[];t.forEach(r=>{if(r.src&&(r.src.startsWith("blob:")||r.src.includes("image-proxy"))){const h=r.getAttribute("data-url");if(r.naturalWidth>0&&r.naturalHeight>0){const m=fetch(r.src).then(c=>c.arrayBuffer()).then(c=>({url:h,bytes:Array.from(new Uint8Array(c)),width:r.naturalWidth,height:r.naturalHeight})).catch(c=>(console.warn("Failed to fetch image:",h,c),null));n.push(m)}}});const o=await Promise.all(n),l=o.filter(r=>r!==null);console.log(`üé® [collectAllData] Collected ${l.length} images (${o.length-l.length} failed)`);let i=[];if(t.length>0)try{console.log("üé® [collectAllData] Calculating palette..."),i=await _(t),console.log("üé® [collectAllData] Calculated colors:",i.length)}catch(r){console.error("üé® [collectAllData] Error calculating palette:",r)}else console.log("üé® [collectAllData] No images found for palette extraction");const e=[];return document.querySelectorAll(".scale-item").forEach(r=>{const h=r.querySelector(".scale-role")?.textContent,m=r.querySelector(".scale-preview");if(h&&m){const c=window.getComputedStyle(m),d=c.fontSize,g=c.fontFamily,v=c.fontWeight,C=m.textContent;e.push({role:h,size:parseInt(d),font:{family:g.replace(/['"]/g,"")},weight:v,text:C})}}),{images:l,colors:i,typography:e}}document.addEventListener("DOMContentLoaded",function(){x.moodboard&&(x.moodboard.onclick=()=>S("moodboard")),x.colors&&(x.colors.onclick=()=>S("colors")),x.typography&&(x.typography.onclick=()=>S("typography")),x.layout&&(x.layout.onclick=()=>S("layout"));const t=document.getElementById("searchInput"),n=document.getElementById("createMoodboardButton");document.querySelectorAll(".chip").forEach(u=>{u.onclick=()=>{t&&(t.value=u.textContent)}}),n&&(n.onclick=()=>H(t?t.value:"")),t&&(t.onkeydown=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),H(t.value))});const o=document.getElementById("backButton");o&&(o.onclick=()=>{t&&(t.value=""),k("search")});const l=document.getElementById("searchTermsBar");l&&(l.onclick=u=>{if(u.target.closest("#reloadButton"))return;const p=document.getElementById("searchTermsDisplay")?.getAttribute("data-original-query")||"";t&&p&&(t.value=p),k("search")});const i=document.getElementById("reloadButton");i&&(i.onclick=u=>{u.stopPropagation();const p=document.getElementById("searchTermsDisplay")?.getAttribute("data-original-query")||"";p&&(console.log("üîÑ Reloading search with different results..."),H(p,!0))});let e=[],a=-1;const r=document.getElementById("detailsImage");window.onmessage=u=>{const s=u?.data?.pluginMessage;if(s){if(s.type==="show-view"&&(console.log("üì® Received show-view message:",s.view),s.view!=="moodboard"?(console.log("‚úÖ Showing view:",s.view),k(s.view)):console.log("‚è∏Ô∏è Skipping immediate moodboard view (handled by progress)"),s.view==="moodboard"&&s.data)){e=[];const p=document.getElementById("moodboardGrid"),w=document.getElementById("searchTermsDisplay");if(w&&s.data.category){w.setAttribute("data-original-query",s.data.category);const f=s.data.category,I=["minimalist","landing page","red","modern","dashboard","mobile app","ecommerce","saas","portfolio","blog","dark","light","bold","clean","vibrant"];let T=f;I.forEach(O=>{const M=new RegExp(`\\b(${O})\\b`,"gi");T=T.replace(M,"<strong>$1</strong>")}),w.innerHTML=T}if(p)if(p.innerHTML="",s.data.pins&&s.data.pins.length>0){let f=0;const I=s.data.pins.length;s.data.pins.forEach((T,O)=>{const M=T.imageUrl||T.image;if(!M)return;const D=j(M),z=e.length;e.push(D);const $=document.createElement("div");$.className="pin-container";const B=document.createElement("img");B.className="pin-image",B.setAttribute("data-url",M),B.crossOrigin="Anonymous",B.onload=()=>{f++,console.log(`‚úÖ Image ${f}/${I} loaded: ${M.substring(0,80)}...`),f>=Math.ceil(I*.8)&&(y(4),s.data.intent&&s.data.intent.colors&&s.data.intent.colors.length>0?(y(5),F(s.data.intent.colors[0])):(y(5),y(6),y(7)))},B.onerror=()=>{if(M.includes("/originals/")&&!B.getAttribute("data-fallback-tried")){const G=M.replace("/originals/","/736x/"),W=j(G);console.warn("‚ö†Ô∏è /originals/ failed (403), trying /736x/ fallback..."),console.warn(`   Original: ${M}`),console.warn(`   Fallback: ${G}`),e[z]=W,B.setAttribute("data-fallback-tried","true"),B.src=W;return}console.error("‚ùå FAILED to load image:"),console.error(`   Original URL: ${M}`),console.error(`   Proxy URL: ${D}`),console.error(`   Pin ID: ${T.id||T.pinId||"unknown"}`),f++,f>=Math.ceil(I*.8)&&(y(4),s.data.intent&&s.data.intent.colors&&s.data.intent.colors.length>0?(y(5),F(s.data.intent.colors[0])):(y(5),y(6),y(7)))},B.src=D;const P=document.createElement("div");P.className="pin-overlay",P.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><path d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>',P.onclick=()=>{a=z,k("details"),r.src=e[z]},$.appendChild(B),$.appendChild(P),p.appendChild($)}),setTimeout(()=>{f<Math.ceil(I*.8)&&(console.warn(`Timeout: Only ${f}/${I} images loaded, continuing anyway`),y(4),s.data.intent&&s.data.intent.colors&&s.data.intent.colors.length>0?(y(5),F(s.data.intent.colors[0])):(y(5),y(6),y(7)))},1e4)}else p.innerHTML='<p style="text-align:center; width:100%;">No pins found.</p>'}if(s.type==="show-view"&&s.view==="moodboard")setTimeout(()=>{const p=document.querySelector(".fab");p&&(p.onclick=()=>{se()})},50);else if(s.type==="image-loaded"){const p=URL.createObjectURL(new Blob([s.imageBytes]));if(s.target==="lightbox")r.src=p;else{const f=Array.from(document.querySelectorAll("img[data-pinterest-url]")).find(I=>I.dataset.pinterestUrl===s.url);f&&(f.src=p)}}else s.type==="progress-update"&&y(s.step)}},window.addEventListener("message",u=>{u.data.type==="update-lightbox-urls"&&(e=u.data.urls,console.log("üé® Lightbox URLs updated. New count:",e.length),a>=e.length&&(a=0))});function h(){const u=document.getElementById("moodboardGrid");if(!u)return;const s=u.querySelectorAll("img"),p=Array.from(s).map(w=>w.complete?Promise.resolve():new Promise(f=>{w.onload=()=>f(),w.onerror=()=>f()}));Promise.all(p).then(()=>{const w=s.length;let f=3;w<=2?f=1:w<=5?f=2:f=3,u.style.columnCount="1",setTimeout(()=>{u.style.columnCount=String(f)},50)})}const m=document.getElementById("detailsCloseBtn");m&&(m.onclick=()=>{k("moodboard"),setTimeout(()=>{h()},100)});const c=document.getElementById("detailsNextBtn");c&&(c.onclick=()=>{a=(a+1)%e.length,r.src=e[a]});const d=document.getElementById("detailsPrevBtn");d&&(d.onclick=()=>{a=(a-1+e.length)%e.length,r.src=e[a]});const g=document.getElementById("detailsDeleteBtn");g&&(g.onclick=()=>{if(a>-1&&e[a]){const u=e[a],s=document.querySelectorAll(".pin-container");let p=null;s.forEach(w=>{const f=w.querySelector("img.pin-image");f&&f.src===u&&(p=w)}),p&&p.remove(),e.splice(a,1),e.length===0?k("moodboard"):(a>=e.length&&(a=0),r.src=e[a])}});const v=document.getElementById("drawerCloseBtn"),C=document.getElementById("drawerBackdrop"),R=document.getElementById("generateStyleGuideBtn");v&&(v.onclick=()=>N()),C&&(C.onclick=()=>N()),R&&(R.onclick=async()=>{const u=ce();console.log("üé® Style guide configuration:",u),N(),k("generating"),console.log("üé® Collecting style guide data...");const s=await de();console.log("üì¶ Data collected:",{images:s.images.length,colors:s.colors.length,typography:s.typography.length}),parent.postMessage({pluginMessage:{type:"generate-full-styleguide",images:s.images,palette:s.colors,typography:s.typography,config:u}},"*")})});</script>
  <style rel="stylesheet" crossorigin>:root{--bg: #FFFFFF;--surface: #F5F5F5;--text-main: #000;--text-sec: #8E8E8E;--border: #E0E0E0}html,body{margin:0;padding:0;width:100%;height:100%;overflow:hidden}*{box-sizing:border-box}body{font-family:Inter,sans-serif;background:var(--bg);color:var(--text-main);-webkit-font-smoothing:antialiased}#view-wrapper{width:100%;height:100vh;display:flex;flex-direction:column;position:relative}.view{position:absolute;inset:0;display:none!important;width:100%;height:100%;flex-direction:column}.view.active{display:flex!important}.view.centered{justify-content:center;align-items:center;padding:24px}.container{width:100%;max-width:720px;margin:0 auto;display:flex;flex-direction:column;align-items:center;text-align:center}.container.welcome{max-width:560px;width:100%;margin:auto}.title{display:flex;align-items:center;justify-content:center;gap:12px;font-size:22px;font-weight:600;margin-bottom:8px}.subtitle{font-size:14px;line-height:1.5;color:gray;margin-bottom:16px;max-width:480px}button{background:#000;color:#fff;border:0;border-radius:8px;font-size:14px;font-weight:600;padding:14px 24px;cursor:pointer;transition:opacity .2s;display:flex;align-items:center;justify-content:center;gap:8px}button:hover{opacity:.85}input[type=text]{width:100%;height:48px;border:1px solid #E6E6E6;border-radius:6px;padding:0 12px;font-size:14px}.row.code{display:flex;gap:8px;width:100%;max-width:440px}.row.code input{flex:1}.search-content{width:100%;max-width:450px;text-align:center}.input-row{display:flex;gap:8px;width:100%;margin-bottom:16px}.input-box{flex:1}.popular-row{display:flex;align-items:center;justify-content:center;gap:12px}.popular-label{font-size:11px;font-weight:600;color:#000000b3}.chips{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}.chip{padding:7px 17px;border-radius:20px;border:1px solid rgba(222,222,222,.6);font-size:11px;cursor:pointer;transition:background .2s}.chip:hover{background:#eee}.container.search-results{justify-content:flex-start;align-items:stretch;text-align:left;height:100%;padding:0;max-width:none}header{display:flex;justify-content:space-between;align-items:flex-end;padding:16px 24px;border-bottom:1px solid #e7e7e7;background:#fff;flex-shrink:0}.header-left{display:flex;align-items:center;gap:12px}.back-btn{width:32px;height:32px;border:1px solid #e7e7e7;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer}.header-title{font-size:18px;font-weight:600;line-height:1.2}.tabs{display:flex;gap:16px;font-size:12px}.tab{cursor:pointer;padding-bottom:4px;color:#0006;font-weight:500}.tab.active{color:#000;font-weight:600;opacity:1}.grid-scroll{flex:1;overflow-y:auto;padding:24px 32px;position:relative}#moodboardGrid{display:block;column-count:3;column-gap:16px;width:100%;padding-bottom:120px;min-height:300px}.pin-container{display:inline-block;width:100%;margin-bottom:16px;border-radius:12px;background:var(--surface);overflow:hidden;break-inside:avoid;position:relative}.pin-image{display:block;width:100%;height:auto!important;max-height:500px;min-height:100px;object-fit:cover;object-position:top;background-color:#e0e0e0}.pin-overlay{position:absolute;inset:0;background:#0000004d;display:flex;justify-content:center;align-items:center;opacity:0;transition:opacity .2s;cursor:pointer}.pin-container:hover .pin-overlay{opacity:1}.palette-header{display:flex;justify-content:space-between;align-items:center;padding:0 8px;margin-bottom:24px}.palette-title h3{text-align:left;margin:0;font-size:18px}.palette-title p{text-align:left;margin:4px 0 0;font-size:13px;color:var(--text-sec)}.palette-layout{display:flex;gap:24px;width:100%;padding:0 16px;align-items:flex-start}.palette-source{width:25%;min-width:140px;display:flex;flex-direction:column;gap:8px;position:sticky;top:0}.source-title{font-size:11px;font-weight:600;text-transform:uppercase;color:var(--text-sec);margin-bottom:4px}.source-thumbnails{display:grid;grid-template-columns:repeat(auto-fill,minmax(60px,1fr));gap:8px}.source-thumb{width:100%;aspect-ratio:1;object-fit:cover;border-radius:8px;border:1px solid var(--border);opacity:.9}.palette-result{width:75%;flex:1}.palette-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;width:100%;padding-bottom:120px}.role-card{background:#fff;border:1px solid var(--border);border-radius:10px;overflow:hidden;display:flex;flex-direction:column;cursor:pointer;transition:transform .1s}.role-card:hover{border-color:#000}.role-preview{height:70px;width:100%;display:flex;align-items:center;justify-content:center;position:relative}.contrast-dot{width:8px;height:8px;border-radius:50%;background:#fff;opacity:.4}.role-info{padding:10px;text-align:left}.role-name{font-size:11px;font-weight:600;text-transform:uppercase;color:var(--text-sec);margin-bottom:2px;display:block}.role-hex{font-size:14px;font-weight:600;color:var(--text-main);font-family:monospace}.role-primitive{font-size:10px;color:var(--text-sec);margin-top:4px;display:block;opacity:.6}.type-grid{display:flex;flex-direction:column;gap:32px;text-align:left;padding-bottom:120px;padding-left:16px;padding-right:16px}.font-pair-card{display:grid;grid-template-columns:1fr 1fr;gap:24px;border-bottom:1px solid var(--border);padding-bottom:24px;margin-bottom:24px}.font-preview-box{display:flex;flex-direction:column;gap:4px}.font-label{font-size:10px;text-transform:uppercase;letter-spacing:1px;color:var(--text-sec);font-weight:600}.font-name{font-size:20px;font-weight:400;color:var(--text-main)}.scale-list{display:flex;flex-direction:column;gap:0}.scale-item{display:grid;grid-template-columns:100px 1fr;align-items:center;gap:16px;border-bottom:1px solid #f0f0f0;padding:16px 0}.scale-meta{display:flex;flex-direction:column;gap:2px;font-family:monospace;color:var(--text-sec)}.scale-role{font-size:11px;font-weight:600;color:var(--text-main);font-family:Inter,sans-serif;margin-bottom:2px}.scale-specs{font-size:9px;opacity:.7}.scale-preview{color:var(--text-main);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%}.dummy-content{padding:60px 24px;text-align:center;color:#8e8e8e;background:#fafafa;border-radius:12px;border:2px dashed #E0E0E0;margin-bottom:120px}.dummy-content h3{color:#000;font-size:18px;margin-bottom:8px}.bottom-bar{position:absolute;bottom:0;left:0;right:0;height:100px;background:linear-gradient(360deg,#fff,#fff0);display:flex;align-items:center;justify-content:center;pointer-events:none}.fab{pointer-events:auto;padding:14px 24px;border-radius:8px;background:#000;color:#fff;font-size:14px;font-weight:600;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:opacity .2s ease;border:none}.modal,.lightbox,.spinner-overlay{position:fixed;inset:0;background:#000c;display:none!important;justify-content:center;align-items:center;z-index:1000}.modal.active,.lightbox.active,.spinner-overlay.active{display:flex!important}.modal-content{background:#fff;padding:20px;border-radius:8px;max-width:280px;text-align:center}.modal-buttons{display:flex;gap:10px;justify-content:center;margin-top:15px}.spinner{border:4px solid rgba(255,255,255,.2);border-left-color:#fff;border-radius:50%;width:24px;height:24px;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.container.details{position:fixed;inset:0;z-index:2000;background:#000;padding:0;overflow:hidden;display:block;width:100%;height:100vh}.container.details .panel{width:100%;height:100%;overflow-y:auto;background:transparent;display:block;padding-bottom:0}#detailsImage{display:block;width:100%;height:auto;object-fit:contain;margin:0;padding:0}#detailsCloseBtn{position:fixed;top:20px;right:20px;padding:8px 12px;background:#fff;border-radius:8px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:9999;font-size:12px;font-weight:600}.container.details .bottom-bar{position:fixed;bottom:0;left:0;right:0;height:100px;background:linear-gradient(0deg,#000,#0000);display:flex;align-items:center;justify-content:center;gap:24px;z-index:9999;pointer-events:none}.container.details .circle-btn{pointer-events:auto;width:44px;height:44px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .1s}.container.details .circle-btn:active{transform:scale(.95)}.container.details .circle-btn.delete{width:64px;height:64px}.container.details .circle-btn svg{stroke:#000;stroke-width:2;width:24px;height:24px}.toast{position:fixed;bottom:-60px;left:50%;transform:translate(-50%);background-color:#28a745;color:#fff;padding:10px 20px;border-radius:8px;z-index:3000;transition:bottom .5s ease-in-out}.toast.show{bottom:30px}.toast.error{background-color:#dc3545}.drawer-backdrop{position:fixed;inset:0;background:#00000080;z-index:4000;display:none;opacity:0;transition:opacity .3s ease}.drawer-backdrop.active{display:block;opacity:1}.drawer{position:fixed;bottom:0;left:0;right:0;background:#fff;border-radius:16px 16px 0 0;box-shadow:0 -4px 24px #00000026;z-index:4001;transform:translateY(100%);transition:transform .3s ease;max-height:80vh;overflow-y:auto}.drawer.active{transform:translateY(0)}.drawer-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border);position:sticky;top:0;background:#fff;z-index:1}.drawer-title{font-size:18px;font-weight:600;color:var(--text-main)}.drawer-close{width:32px;height:32px;border-radius:8px;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;cursor:pointer;background:transparent;transition:background .2s}.drawer-close:hover{background:var(--surface)}.drawer-content{padding:24px}.drawer-section{margin-bottom:32px}.drawer-section:last-child{margin-bottom:0}.drawer-section-title{font-size:14px;font-weight:600;color:var(--text-main);margin-bottom:16px}.drawer-option{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f5f5f5}.drawer-option:last-child{border-bottom:none}.drawer-option-label{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--text-main)}.drawer-option-label.disabled{color:var(--text-sec);opacity:.6}.chip-soon{display:inline-block;padding:4px 10px;background:#f0f0f0;color:#666;font-size:10px;font-weight:600;text-transform:uppercase;border-radius:12px;letter-spacing:.5px}.toggle-switch{position:relative;width:44px;height:24px;flex-shrink:0}.toggle-switch input{opacity:0;width:0;height:0}.toggle-slider{position:absolute;cursor:pointer;inset:0;background-color:#ccc;border-radius:24px;transition:background-color .2s}.toggle-slider:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;border-radius:50%;transition:transform .2s}.toggle-switch input:checked+.toggle-slider{background-color:#000}.toggle-switch input:checked+.toggle-slider:before{transform:translate(20px)}.toggle-switch input:disabled+.toggle-slider{background-color:#e0e0e0;cursor:not-allowed;opacity:.5}.drawer-footer{padding:16px 24px;border-top:1px solid var(--border);background:#fff;position:sticky;bottom:0;display:flex;justify-content:flex-end}.drawer-footer button{width:auto}.container.loading{max-width:480px;width:100%;padding:40px 24px;align-items:flex-start;text-align:left}.loading-title{font-size:20px;font-weight:600;color:var(--text-main);margin:0 0 32px;text-align:left;padding-left:4px}.progress-list{display:flex;flex-direction:column;gap:16px;width:100%;text-align:left}.progress-item{display:flex;align-items:flex-start;gap:12px;opacity:.4;transition:opacity .3s ease}.progress-item.active{opacity:1}.progress-item.completed{opacity:.6}.progress-item .checkbox{font-family:monospace;font-size:18px;line-height:1.4;color:var(--text-sec);flex-shrink:0;transition:all .3s ease}.progress-item.completed .checkbox{color:var(--text-main)}.progress-item .text{font-size:14px;line-height:1.6;color:var(--text-main);flex:1}.container.search-agent{max-width:600px;width:100%;padding:0 24px;display:flex;flex-direction:column;align-items:center}.agent-title{font-size:22px;font-weight:600;text-align:center;margin-bottom:20px;color:#000;letter-spacing:-.02em}.agent-input-wrapper{position:relative;width:100%;max-width:480px}.agent-input{width:100%;height:130px;border-radius:24px;border:1px solid transparent;background:#f9f9f9;padding:24px 24px 80px;font-family:Inter,sans-serif;font-size:13px;line-height:1.5;color:#000;resize:none;outline:none;box-shadow:none;transition:all .2s ease}.agent-input:focus{border-color:#eaeaea;box-shadow:none}.agent-input::placeholder{color:#7d7d7d;font-size:13px}.agent-submit-btn{position:absolute;bottom:16px;right:16px;width:40px;height:40px;border-radius:50%;background:transparent;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:transform .2s ease;padding:0}.agent-submit-btn:hover{transform:scale(1.05);background:transparent}.agent-submit-btn:active{transform:scale(.95)}.search-terms-bar{background:#f9f9f9;padding:16px;margin:0 0 24px;border-radius:8px;display:flex;align-items:baseline;gap:6px;cursor:pointer;transition:background .2s ease;overflow:hidden;text-align:left}.search-terms-bar:hover{background:#f0f0f0}.results-label{font-size:13px;font-weight:600;color:#000;flex-shrink:0}.search-terms-text{font-size:13px;font-style:italic;color:#7d7d7d;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.search-terms-text strong{font-weight:600;font-style:italic}.reload-btn{background:transparent;border:none;padding:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease;color:#666;flex-shrink:0;margin-left:8px}.reload-btn:hover{background:#e0e0e0;color:#000}.reload-btn:active{transform:rotate(180deg)}.container.generating{max-width:480px;width:100%;padding:40px 24px;text-align:center}.container.generating .spinner{display:inline-block;width:40px;height:40px;border:3px solid #f3f3f3;border-top:3px solid #000;border-radius:50%;animation:spin 1s linear infinite}.generating-message{font-size:13px;line-height:1.6;color:#7d7d7d;margin:0}</style>
</head>

<body>
    <div id="view-wrapper" class="view-wrapper">
        <!-- SEARCH VIEW (Default) -->
        <div id="view-search" class="view centered active">
            <div class="container search-agent">
                <h1 class="agent-title">What will spark your creativity today?</h1>
                <div class="agent-input-wrapper">
                    <textarea id="searchInput" class="agent-input"
                        placeholder="Describe: &quot;modern red landing, big imagery, strong titles&quot;"></textarea>
                    <button id="createMoodboardButton" class="agent-submit-btn">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="40" height="40" rx="20" fill="black" />
                            <path d="M26 20L14 20M26 20L21 15.5M26 20L21 24.5" stroke="white" stroke-width="1.6"
                                stroke-linecap="round" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- 3.5 LOADING -->
        <div id="view-loading" class="view centered">
            <div class="container loading">
                <h2 class="loading-title">Creating your mood board</h2>
                <div class="progress-list">
                    <div class="progress-item" data-step="1">
                        <span class="checkbox">‚òê</span>
                        <span class="text">Getting the creative spark you're chasing</span>
                    </div>
                    <div class="progress-item" data-step="2">
                        <span class="checkbox">‚òê</span>
                        <span class="text">Roaming across sources for the good stuff</span>
                    </div>
                    <div class="progress-item" data-step="3">
                        <span class="checkbox">‚òê</span>
                        <span class="text">Giving shape to your Viiibe board</span>
                    </div>
                    <div class="progress-item" data-step="4">
                        <span class="checkbox">‚òê</span>
                        <span class="text">Blending colors and pixels that click</span>
                    </div>
                    <div class="progress-item" data-step="5">
                        <span class="checkbox">‚òê</span>
                        <span class="text">Laying out text styles that read beautifully</span>
                    </div>
                    <div class="progress-item" data-step="6">
                        <span class="checkbox">‚òê</span>
                        <span class="text">Selecting the patterns that truly fit</span>
                    </div>
                    <div class="progress-item" data-step="7">
                        <span class="checkbox">‚òê</span>
                        <span class="text">Ready to go: review and polish your Viiibe board</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3.6 GENERATING STYLE GUIDE -->
        <div id="view-generating" class="view centered">
            <div class="container generating">
                <div class="spinner" style="margin-bottom: 24px;"></div>
                <p class="generating-message">Putting it all together: color palette, type scale, and a beautiful Viiibe
                    board...</p>
            </div>
        </div>

        <!-- 4. RESULTS -->
        <div id="view-moodboard" class="view">
            <div class="container search-results">
                <header>
                    <div class="header-left">
                        <div id="backButton" class="back-btn" title="Back">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M14.1377 12.3198L10.6963 15.7612H23.0889V16.7612H10.6973L14.1377 20.2017L13.4307 20.9087L8.7832 16.2612L9.13672 15.9077L13.4307 11.6128L14.1377 12.3198Z"
                                    fill="black" />
                            </svg>
                        </div>
                        <div class="header-text">
                            <div class="header-title">Results</div>
                        </div>
                    </div>
                    <div class="tabs">
                        <div id="tab-moodboard" class="tab active">Mood board</div>
                        <div id="tab-colors" class="tab">Color palette</div>
                        <div id="tab-typography" class="tab">Type scale</div>
                        <div id="tab-layout" class="tab">Layout</div>
                    </div>
                </header>

                <div class="grid-scroll">
                    <div id="searchTermsBar" class="search-terms-bar">
                        <span class="results-label">Results for:</span>
                        <span id="searchTermsDisplay" class="search-terms-text"></span>
                        <button id="reloadButton" class="reload-btn" title="Get different results">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M17.5 10C17.5 14.1421 14.1421 17.5 10 17.5C5.85786 17.5 2.5 14.1421 2.5 10C2.5 5.85786 5.85786 2.5 10 2.5C12.0711 2.5 13.9461 3.35714 15.3033 4.75"
                                    stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                                <path d="M15 2.5V5H12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                    <div id="moodboardGrid"></div>

                    <!-- Color Palette -->
                    <div id="section-colors" class="section-container" style="display: none;">
                        <div class="palette-header">
                            <div class="palette-title">
                                <h3>System Colors</h3>
                                <p>Semantic roles generated from moodboard.</p>
                            </div>
                        </div>
                        <div class="palette-layout">
                            <div class="palette-source"><span class="source-title">Source Inspiration</span>
                                <div id="sourceImagesGrid" class="source-thumbnails"></div>
                            </div>
                            <div class="palette-result">
                                <div id="paletteGrid" class="palette-grid">
                                    <p style="grid-column:1/-1; text-align:center; color:#999; margin-top:20px;">
                                        Analyzing pixels...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Typography -->
                    <div id="section-typography" class="section-container" style="display: none;">
                        <div class="palette-header" style="margin-bottom: 24px; padding: 0 16px;">
                            <div class="palette-title">
                                <h3 style="margin:0; font-size:18px;">Type Scale</h3>
                                <p style="line-height: 1.5; margin: 4px 0 0 0; color: #8E8E8E; font-size: 13px;">Based
                                    on your moodboard vibe, we suggest a <strong>functional pairing</strong> to start
                                    your system.<br><span style="opacity: 0.7; font-size: 12px;">(Note: We can't detect
                                        exact fonts from images yet, so we provide a solid match for the style).</span>
                                </p>
                            </div>
                        </div>
                        <div id="typographyContent" class="type-grid">
                            <p style="text-align:center; color:#999;">Analyzing style...</p>
                        </div>
                    </div>

                    <!-- Layouts -->
                    <div id="section-layout" class="dummy-content" style="display: none;">
                        <h3>Layouts</h3>
                        <p>Features coming soon...</p>
                    </div>
                </div>

                <div class="bottom-bar">
                    <div class="fab">
                        Generate style guide
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. DETAILS -->
        <div id="view-details" class="view">
            <div class="container details">
                <div class="panel">
                    <div id="detailsCloseBtn" class="chip-close">Done with curation</div>
                    <img id="detailsImage" class="details-image" alt="Preview" />
                    <div class="bottom-bar">
                        <div id="detailsPrevBtn" class="circle-btn"><svg fill="none" viewBox="0 0 24 24">
                                <path d="M15 18L9 12L15 6" stroke="black" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg></div>
                        <div id="detailsDeleteBtn" class="circle-btn delete"><svg fill="none" viewBox="0 0 24 24">
                                <path
                                    d="M4 7H20M9 3H15M10 11V17M14 11V17M6 7L7 19C7 20.1046 7.89543 21 9 21H15C16.1046 21 17 20.1046 17 19L18 7"
                                    stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg></div>
                        <div id="detailsNextBtn" class="circle-btn"><svg fill="none" viewBox="0 0 24 24">
                                <path d="M9 6L15 12L9 18" stroke="black" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- UTILS -->
        <div id="lightbox" class="lightbox">
            <div id="spinnerOverlay" class="spinner-overlay">
                <div class="spinner"></div>
            </div>
            <span id="lightboxClose" class="lightbox-close">&times;</span>
            <button id="lightboxPrev" class="lightbox-nav prev">&lt;</button>
            <img id="lightboxImage" class="lightbox-content">
            <button id="lightboxNext" class="lightbox-nav next">&gt;</button>
            <div class="lightbox-actions"><button id="lightboxDeleteButton" class="danger">Eliminar</button></div>
        </div>
        <div id="confirmModal" class="modal">
            <div class="modal-content">
                <p><strong>¬øQuitar esta imagen del moodboard?</strong></p>
                <div class="modal-buttons"><button id="cancelDeleteButton" class="secondary">Cancelar</button><button
                        id="confirmDeleteButton" class="danger">Quitar</button></div>
            </div>
        </div>
        <div id="toast" class="toast"></div>

        <!-- DRAWER -->
        <div id="drawerBackdrop" class="drawer-backdrop"></div>
        <div id="styleGuideDrawer" class="drawer">
            <div class="drawer-header">
                <div class="drawer-title">Style guide set</div>
                <div id="drawerCloseBtn" class="drawer-close">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 4L4 12M4 4L12 12" stroke="black" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </div>
            </div>
            <div class="drawer-content">
                <!-- Basic Download Section -->
                <div class="drawer-section">
                    <div class="drawer-section-title">Basic download</div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Download mood board</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-moodboard" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Download color palette</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-palette" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Download type scale</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-typography" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Advanced Download Section -->
                <div class="drawer-section">
                    <div class="drawer-section-title">Advanced download</div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Create Figma styles</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-styles">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Create Figma variables</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-variables">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="drawer-option">
                        <div class="drawer-option-label disabled">
                            Create basic components
                            <span class="chip-soon">Soon</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-components" disabled>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="drawer-footer">
                <button id="generateStyleGuideBtn">Get style guide</button>
            </div>
        </div>
    </div>
</body>

</html>