<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Viiibe – Connect</title>
    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lato:wght@400;700&family=Playfair+Display:wght@400;700&family=Roboto:wght@400;500;700&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="view-wrapper" class="view-wrapper">
        <!-- SEARCH VIEW (Default) -->
        <div id="view-search" class="view centered active">
            <div class="container search-agent">
                <img src="moodboard-illustration.png" alt="Moodboard" class="search-illustration" />
                <h1 class="agent-title">From vibe to build-ready</h1>
                <p class="agent-subtitle">Describe the inspiration you need, and Viiibe! will generate a
                    production-ready mood board with color palette, type scale, and Figma variables.</p>
                <div class="agent-input-wrapper">
                    <textarea id="searchInput" class="agent-input"
                        placeholder="e.g., modern, premium; blue palette, sans typography."></textarea>
                    <button id="createMoodboardButton" class="agent-submit-btn">
                        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect width="40" height="40" rx="20" fill="black" />
                            <path d="M26 20L14 20M26 20L21 15.5M26 20L21 24.5" stroke="white" stroke-width="1.6"
                                stroke-linecap="round" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- 3.5 LOADING (Searching) -->
        <div id="view-loading" class="view centered">
            <div class="container loading-simple">
                <div id="lottie-logo" class="loading-logo"></div>
                <h2 class="loading-title-simple">Viiibe! is creating your mood board</h2>
                <p class="loading-subtitle">This might take a second or two...</p>
            </div>
        </div>

        <!-- 3.6 GENERATING STYLE GUIDE -->
        <div id="view-generating" class="view centered">
            <div class="container generating">
                <div class="spinner" style="margin-bottom: 24px;"></div>
                <p class="generating-message">Putting it all together: color palette, type scale, and a beautiful Viiibe
                    board...</p>
            </div>
        </div>

        <!-- 3.7 EMPTY STATE (No Results) -->
        <div id="view-empty" class="view centered">
            <div class="container empty-state">
                <div id="emptyStateContent" class="empty-state-content">
                    <!-- Content will be injected by JavaScript -->
                </div>
            </div>
        </div>

        <!-- 4. RESULTS -->
        <div id="view-moodboard" class="view">
            <div class="container search-results">
                <header>
                    <div class="header-left" style="display: flex; gap: 10px; align-items: center;">
                        <div id="backButton" class="back-btn" title="Back">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M14.1377 12.3198L10.6963 15.7612H23.0889V16.7612H10.6973L14.1377 20.2017L13.4307 20.9087L8.7832 16.2612L9.13672 15.9077L13.4307 11.6128L14.1377 12.3198Z"
                                    fill="black" />
                            </svg>
                        </div>
                        <button id="reloadButton" class="reload-btn" title="Get different results"
                            style="width: 32px; height: 32px; border-radius: 8px; border: 1px solid #E7E7E7; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center; padding: 0;">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <rect x="0.5" y="0.5" width="31" height="31" rx="7.5" stroke="#E7E7E7" />
                                <path
                                    d="M22.1851 12.6783C21.0268 10.6787 18.8619 9.33337 16.3823 9.33337C13.5709 9.33337 11.1641 11.0628 10.1703 13.5145M20.1505 13.5145H23.5V10.1696M10.6482 19.3681C11.8065 21.3677 13.9714 22.713 16.451 22.713C19.2624 22.713 21.6693 20.9835 22.6631 18.5319M12.6828 18.5319H9.33333V21.8768"
                                    stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                    <div class="tabs">
                        <div id="tab-moodboard" class="tab active">Mood board</div>
                        <div id="tab-colors" class="tab">Color palette</div>
                        <div id="tab-typography" class="tab">Type scale</div>
                        <div id="tab-layout" class="tab">Layout</div>
                    </div>
                </header>

                <div class="grid-scroll">
                    <div id="moodboardGrid"></div>

                    <!-- Color Palette -->
                    <div id="section-colors" class="section-container"
                        style="display: none; position: relative; height: 100%; overflow: hidden;">
                        <div id="paletteGrid" class="palette-grid-fullscreen">
                            <p style="grid-column:1/-1; text-align:center; color:#999; margin-top:20px;">
                                Analyzing pixels...</p>
                        </div>
                    </div>

                    <!-- Typography -->
                    <div id="section-typography" class="section-container" style="display: none;">
                        <div class="palette-header" style="margin-bottom: 24px; padding: 0 16px;">
                            <div class="palette-title">
                                <h3 style="margin:0; font-size:18px;">Type Scale</h3>
                                <p style="line-height: 1.5; margin: 4px 0 0 0; color: #8E8E8E; font-size: 13px;">Based
                                    on your moodboard vibe, we suggest a <strong>functional pairing</strong> to start
                                    your system.<br><span style="opacity: 0.7; font-size: 12px;">(Note: We can't detect
                                        exact fonts from images yet, so we provide a solid match for the style).</span>
                                </p>
                            </div>
                        </div>
                        <div id="typographyContent" class="type-grid">
                            <p style="text-align:center; color:#999;">Analyzing style...</p>
                        </div>
                    </div>

                    <!-- Layouts -->
                    <div id="section-layout" class="dummy-content" style="display: none;">
                        <h3>Layouts</h3>
                        <p>Features coming soon...</p>
                    </div>
                </div>

                <div class="bottom-bar">
                    <!-- Unified toolbar with white gradient - shows different buttons per tab -->
                    <div id="toolbarContainer"
                        style="position: fixed; bottom: 0; left: 0; right: 0; height: 140px; background: linear-gradient(0deg, #FFF 0%, rgba(255, 255, 255, 0.00) 94.87%); pointer-events: none; z-index: 1000; display: flex; align-items: center; justify-content: center;">

                        <!-- White container for both buttons -->
                        <div id="buttonsWrapper"
                            style="display: flex; gap: 10px; border-radius: 1000px; background: #FFF; padding: 6px; pointer-events: auto;">
                            <!-- Curate button (Mood board only) -->
                            <button id="curateBtn"
                                style="display: block; width: 54px; height: 54px; border-radius: 50%; border: none; background: rgba(0,0,0,0.05); cursor: pointer; padding: 0; display: flex; align-items: center; justify-content: center;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="12" cy="12" r="10" stroke="black" stroke-width="2" fill="none" />
                                    <circle cx="12" cy="12" r="3" fill="black" />
                                </svg>
                            </button>

                            <!-- Create button (Mood board & Color palette & Type scale) -->
                            <button id="createBtn"
                                style="display: block; width: 54px; height: 54px; border-radius: 50%; border: none; background: black; cursor: pointer; padding: 0; display: flex; align-items: center; justify-content: center;">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M4.99963 7V11M9.99963 2V6M17.9996 16V20M2.99963 9H6.99963M7.99963 4H11.9996M15.9996 18H19.9996M13.9996 7L16.828 9.82843M19.5162 3.74609L20.0819 4.31177C20.4779 4.70781 20.6759 4.90583 20.7501 5.13418C20.8154 5.33496 20.8154 5.55127 20.7501 5.75205C20.6759 5.9804 20.4779 6.17842 20.0819 6.57446L6.52514 20.1313C6.12909 20.5274 5.93107 20.7254 5.70272 20.7996C5.50194 20.8649 5.28563 20.8649 5.08485 20.7996C4.8565 20.7254 4.65848 20.5274 4.26243 20.1313L3.69676 19.5657C3.30071 19.1696 3.10269 18.9716 3.02847 18.7433C2.96318 18.5425 2.96318 18.3262 3.02847 18.1254C3.10269 17.897 3.30071 17.699 3.69676 17.303L17.2536 3.74609C17.6496 3.35005 17.8476 3.15203 18.0759 3.07781C18.2767 3.01252 18.493 3.01252 18.6938 3.07781C18.9222 3.15203 19.1202 3.35005 19.5162 3.74609Z"
                                        stroke="white" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. DETAILS -->
        <div id="view-details" class="view">
            <div class="container details">
                <div class="panel">
                    <div id="detailsCloseBtn" class="chip-close">Done with curation</div>
                    <img id="detailsImage" class="details-image" alt="Preview" />
                    <div class="bottom-bar">
                        <div id="detailsPrevBtn" class="circle-btn"><svg fill="none" viewBox="0 0 24 24">
                                <path d="M15 18L9 12L15 6" stroke="black" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg></div>
                        <div id="detailsDeleteBtn" class="circle-btn delete"><svg fill="none" viewBox="0 0 24 24">
                                <path
                                    d="M4 7H20M9 3H15M10 11V17M14 11V17M6 7L7 19C7 20.1046 7.89543 21 9 21H15C16.1046 21 17 20.1046 17 19L18 7"
                                    stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg></div>
                        <div id="detailsNextBtn" class="circle-btn"><svg fill="none" viewBox="0 0 24 24">
                                <path d="M9 6L15 12L9 18" stroke="black" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. MINI-PRD CHAT VIEW -->
        <div id="view-mini-prd" class="view">
            <div class="chat-container">
                <!-- Header con progreso -->
                <div class="chat-header">
                    <div class="back-btn-chat" id="backFromChat">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="black" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <div class="progress-indicator">
                        <span id="chatCurrentStep">1</span>/<span id="chatTotalSteps">6</span>
                    </div>
                </div>

                <!-- Mensajes del chat -->
                <div class="chat-messages" id="chatMessages">
                    <!-- Los mensajes se agregan dinámicamente -->
                </div>

                <!-- Input area -->
                <div class="chat-input-container">
                    <textarea id="chatInput" placeholder="Escribe tu respuesta..." rows="1"></textarea>
                    <button id="chatSendBtn" class="send-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13" stroke="white" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- 7. CONFIRMATION VIEW -->
        <div id="view-confirmation" class="view centered">
            <div class="container confirmation">
                <div class="confirmation-content">
                    <div class="confirmation-icon">✨</div>
                    <h2 class="confirmation-title">I understand you're looking for:</h2>
                    <p class="confirmation-summary" id="confirmationSummary">
                        <!-- Se llena dinámicamente -->
                    </p>
                    <div class="confirmation-details" id="confirmationDetails">
                        <!-- Se llena dinámicamente con tags -->
                    </div>
                    <div class="confirmation-actions">
                        <button id="confirmGenerateBtn" class="btn-primary">
                            Create Moood! board
                        </button>
                        <button id="confirmBackBtn" class="btn-secondary">
                            Add more info
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- UTILS -->
        <div id="lightbox" class="lightbox">
            <div id="spinnerOverlay" class="spinner-overlay">
                <div class="spinner"></div>
            </div>
            <span id="lightboxClose" class="lightbox-close">&times;</span>
            <button id="lightboxPrev" class="lightbox-nav prev">&lt;</button>
            <img id="lightboxImage" class="lightbox-content">
            <button id="lightboxNext" class="lightbox-nav next">&gt;</button>
            <div class="lightbox-actions"><button id="lightboxDeleteButton" class="danger">Eliminar</button></div>
        </div>
        <div id="confirmModal" class="modal">
            <div class="modal-content">
                <p><strong>¿Quitar esta imagen del moodboard?</strong></p>
                <div class="modal-buttons"><button id="cancelDeleteButton" class="secondary">Cancelar</button><button
                        id="confirmDeleteButton" class="danger">Quitar</button></div>
            </div>
        </div>
        <div id="toast" class="toast"></div>

        <!-- DRAWER -->
        <div id="drawerBackdrop" class="drawer-backdrop"></div>
        <div id="styleGuideDrawer" class="drawer">
            <div class="drawer-header">
                <div class="drawer-title">Style guide set</div>
                <div id="drawerCloseBtn" class="drawer-close">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 4L4 12M4 4L12 12" stroke="black" stroke-width="2" stroke-linecap="round" />
                    </svg>
                </div>
            </div>
            <div class="drawer-content">
                <!-- Basic Download Section -->
                <div class="drawer-section">
                    <div class="drawer-section-title">Basic download</div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Download mood board</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-moodboard" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Download color palette</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-palette" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Download type scale</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-typography" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Advanced Download Section -->
                <div class="drawer-section">
                    <div class="drawer-section-title">Advanced download</div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Create Figma styles</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-styles">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="drawer-option">
                        <div class="drawer-option-label">Create Figma variables</div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-variables">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="drawer-option">
                        <div class="drawer-option-label disabled">
                            Create basic components
                            <span class="chip-soon">Soon</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="toggle-components" disabled>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="drawer-footer">
                <button id="generateStyleGuideBtn">Get style guide</button>
            </div>
        </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
</body>

</html>